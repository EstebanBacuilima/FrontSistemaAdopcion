<body>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">

    <div class="container w-95 mt-100 me-25 bg-primary rounded shadown">
        <div class="row align-items-strech">
            <div class="col bg d-none d-lg-block col-md-5 col-lg-5 col-xl-6 rounded">

            </div>
            <div class="col bg-white mt-30 p-20 rounded-end" >
                <div class="imagen text-end">
                    <img class="imgen" src="./assets/Imagenes/logoFundacionesMascotas.png" width="85" alt="logo">
                </div>
                <h2 class="fw-bold text-center py-1"> Bienvenido</h2>

                <!-- LOGIN -->
                <form action="#">
                    <div class="mb-4">
                        <label for="username" class="form-label"> Usuario <i class="uil uil-user"></i></label>
                        <input id="username" class="form-control" name="username" type="username"
                            [(ngModel)]="usuario.username"  maxlength="30" minlength="3"
                            pInputText placeholder="Ingresa tu nombre de usuario" />
                    </div>
                    <div class="mb-4 input-wrapper input-field">
                        <label for="password" class="password form-label"> Contraseña <i
                                class="uil uil-lock icon"></i></label>
                        <input id="password" class="password form-control" name="password" type="password"
                            [(ngModel)]="usuario.password" maxlength="30" minlength="5"
                            placeholder="**************" />
                        <i class="input-icon uil uil-eye-slash showHidePw"></i>

                        <small id="password-help" class="small" style="color: lightgray;"><i>Ingresa más de 5 dígitos</i></small>

                    </div>

                    <div class="md-6 d-grid text-center">
                        <button type="submit" class="btn btn-primarys p-button-rounded" style="text-align: center;"
                            (click)="login()" value="Iniciar Sesión">Iniciar Sesión</button>
                    </div>

                    <!-- <ng-container *ngIf="showSpinner">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </ng-container> -->

                    <div class="my3 text-center p-1 ">

                        <span>¿Aún no tienes cuenta? <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal" class="btn-reg"><b>Registrate aquí</b></a></span><br>
                        <span>¿Olvidó su contraseña? <a href="#" data-bs-toggle="modal"
                                data-bs-target="#examplePassword" class="btn-reg"><b>Click aquí</b></a></span><br>

                    </div>

                    <div class="my3">
                        <br>
                        <br>
                    </div>
                </form>
            </div>
        </div>
    </div>



    <!-- Modal -->
    <div class="modal" id="exampleModal" tabindex="-5" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="text-align: center;">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        id="closeModal" (click)=" limpiarCampos()"></button>
                </div>
                <div class="container w-75 mt-25 me-25 mt-5 shadown">
                    <div class="row align-items-strech">
                        <div class="col  mt-25 p-25 grid p-fluid ">

                            <h5 class="titulo" id="titulo"  style="text-align: center; padding: 25px;" ><b>FORMULARIO DE REGISTRO</b></h5>
                            <form class="row g-2 needs-validation" novalidate>
                                <div class="col-md-6">
                                    <label for="cedula" class="form-label-p">Cédula</label> <label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <input id="cedula" class="form-control" type="text" name="cedula" maxlength="10"  pInputText [(ngModel)]="persona.cedula" [pKeyFilter]="'int'" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="nombres" class="form-label-p">Nombres</label><label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <input id="nombres" type="text" class="form-control" name="nombres" maxlength="50" pInputText [(ngModel)]="persona.nombres" [pKeyFilter]="letrasEspace"(keyup)="formatInput(persona.nombres)" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="apellidos" class="form-label-p"> Apellidos</label><label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <input id="apellidos" type="text" class="form-control" name="apellidos" maxlength="50" pInputText [(ngModel)]="persona.apellidos" [pKeyFilter]="letrasEspace" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="fechaNacimiento" class="form-label-p"> Fecha de nacimiento</label><label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <p-calendar id="fechaNacimiento" type="date" class="fecha" name="fechaNacimiento" 
                                        [(ngModel)]="persona.fechaNacimiento" [showIcon]="true" inputId="icon"
                                        (ngModelChange)="calcularEdad()"></p-calendar>
                                </div>
                                <div class="col-md-6">
                                    <label for="direccion" class="form-label-p"> Dirección</label><label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <input id="direccion" type="text" class="form-control" name="direccion" maxlength="200" pInputText
                                        [(ngModel)]="persona.direccion"  required>
                                </div>
                                <div class="col-md-6">
                                    <label for="genero" class="form-label-p"> Género</label>
                                    <p-dropdown id="genero" name="genero" [options]="generos" 
                                        [(ngModel)]="persona.genero" placeholder="Selecciona un género"
                                        [showClear]="false" [ngClass]="{'is-invalid': !generoValido}" ></p-dropdown>
                                </div>
                                <div class="col-md-6">
                                    <label for="telefono" class="form-label-p"> Teléfono</label>
                                    <input id="telefono" type="text" class="form-control" name="telefono" maxlength="7" pInputText
                                        [(ngModel)]="persona.telefono" [pKeyFilter]="'int'" >
                                        
                                </div>
                                <div class="col-md-6">
                                    <label for="celular" class="form-label-p"> Celular</label>
                                    <input type="text" class="form-control" id="celular" name="celular" maxlength="10"
                                        pInputText [(ngModel)]="persona.celular" [pKeyFilter]="'int'">
                                </div>
                                <div class="col-md-6">
                                    <label for="correo" class="form-label-p"> Correo</label>
                                    <input id="correo" type="text" class="form-control" name="correo" maxlength="50"
                                        pInputText [(ngModel)]="persona.correo"
                                        > 
                                        <!-- (ngModelChange)="validarCorreo()"  class={{verfCorreo}} SE QUITO DEL CORREO -->
                                </div>
                                <div class="col-md-6">
                                    <label for="username" class="form-label-p"> Usuario</label><label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <input id="username" type="text" class="form-control" name="username" maxlength="15" pInputText
                                        [(ngModel)]="usuario.username" required>
                                </div>
                                <div class="col-md-6">

                                    <label for="password" class="form-label-p"> Contraseña</label><label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <p-password id="password" name="password" [(ngModel)]="usuario.password"
                                        [toggleMask]="true" required></p-password>
                                </div>
                                <div class="col-md-6">
                                    <label for="passwordv" class="form-label-p"> Repita su Contraseña</label><label for="cedula" class="form-label-p" style="color: rgb(255, 0, 0); padding-left: 2px;"> *</label>
                                    <p-password id="passwordv" name="passwordv" [(ngModel)]="verficarPassword"
                                        [toggleMask]="true" required></p-password>

                                </div>
                                <div class="foto">
                                    <div class="roww">
                                        <div class="col-md-2 imgUp">
                                            <div class="imagePreview" *ngIf="file">
                                                <img [src]="file" class="imagePreview" alt="..." />
                                            </div>
                                                <label class="btn btn-primarys rounded-mid">Foto de perfil
                                                <input type="file" class="uploadFile img" value="Upload Photo" (change)="imageSelected($event)"
                                                    style="width: 0px;height: 0px;overflow: hidden;">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="modal-footer">

                                    <button type="button" class="btn btn-primaryss" data-bs-dismiss="modal"
                                        (click)=" limpiarCampos()">Cancelar</button>
                                    <button type="submit" class="btn btn-primarys1" (click)="registrarUsuario()">Registrarse</button>

                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="examplePassword" tabindex="-5" aria-labelledby="examplePassword" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="text-align: center;">
                    <button type="button" (click)="limpiarRecuContra()" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close" id="closeModal"></button>
                </div>
                <div class="container w-75 mt-25 me-25 mt-5 shadown">
                    <div class="row align-items-strech">
                        <div class="col bg-white mt-25 p-25 grid p-fluid ">


                            <h5 class="titulo" id="titulo"  style="text-align: center; padding: 25px;" >Recuperación de constraseña</h5>
                            <form class="row g-2">
                                <div  class="col-md-12" *ngIf='activarPassword == false'>
                                    <label for="cedula" class="form-label-p"> Cédula</label>
                                    <input id="cedula" type="text" name="cedula" maxlength="10" pInputText [(ngModel)]="cedulaValidar" [pKeyFilter]="'int'">
                                </div>
                                <button *ngIf='activarPassword == false' type="button" class="btn btn-primarys" (click)="validarCedula()">Validar</button>
                                <h5 *ngIf='activarPassword == true' class="titulo" id="titulo"  style="text-align: center; padding: 25px;" >Usuario: {{usuario.username}} </h5>
                                <div class="col-md-6" *ngIf='activarPassword == true' >

                                    <label for="password" class="form-label-p"> Contraseña</label>
                                    <p-password name="password" [(ngModel)]="usuario.password"
                                        [toggleMask]="true"></p-password>
                                </div>
                                <div class="col-md-6" *ngIf='activarPassword == true' >
                                    <label for="password" class="form-label-p"> Repita su contraseña</label>
                                    <p-password name="password" [(ngModel)]="verficarPassword" [toggleMask]="true"></p-password>
                                </div>      
                                <button *ngIf='activarPassword == true' type="button" class="btn btn-primary" (click)="cambiarConstra()">Cambiar constraseña</button>     

                                <div class="col-md-6" style="padding-bottom: 30px;">
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primaryss" data-bs-dismiss="modal"
                        (click)="limpiarRecuContra()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

</body>